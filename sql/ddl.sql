CREATE TABLE public.auth (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  uid UUID NOT NULL DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  hash TEXT DEFAULT NULL,
  salt TEXT DEFAULT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE public.licenses (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  uid TEXT NOT NULL,
  service TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  expires_at TIMESTAMP WITH TIME ZONE,

  CONSTRAINT uq_licenses_uid_service UNIQUE (uid, service)
);
